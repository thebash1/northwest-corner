<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            padding: 20px;
        }
        
        .table-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
            margin: 20px 0;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
            border-radius: 5px;
            overflow: hidden;
        }
        
        th, td {
            border: 1px solid #dee2e6;
            padding: 0;
            text-align: center;
            position: relative;
            width: 100px;
            height: 80px;
            vertical-align: middle;
        }
        
        th {
            background-color: #f8f9fa;
            color: #495057;
            font-weight: 600;
            padding: 12px;
            border-bottom: 2px solid #dee2e6;
            text-transform: uppercase;
            font-size: 14px;
        }
        
        /* tr:hover {
            background-color: rgba(0, 123, 255, 0.03);
        } */
        
        tr:first-child th:first-child {
            border-top-left-radius: 5px;
        }
        
        tr:first-child th:last-child {
            border-top-right-radius: 5px;
        }
        
        tr:last-child td:first-child {
            border-bottom-left-radius: 5px;
        }
        
        tr:last-child td:last-child {
            border-bottom-right-radius: 5px;
        }
        
        .cell {
            position: relative;
            width: 100%;
            height: 100%;
        }
        
        .diagonal-line {
            position: absolute;
            width: 100%;
            height: 1px;
            background-color: #adb5bd;
            top: 50%;
            left: 0%;
            transform: rotate(-35deg);
            transform-origin: center;
        }
        
        .top-value {
            position: absolute;
            top: 15px;
            left: 15px;
            z-index: 1;
            font-size: 15px;
            color: #495057;
        }
        
        .bottom-value {
            position: absolute;
            bottom: 15px;
            right: 15px;
            z-index: 1;
            font-size: 15px;
            color: #495057;
            font-weight: 500;
        }
        
        .highlighted {
            background-color: #7e7e7e00;
            color: #0a0a0ac3;
            font-weight: 600;
            font-size: 16px;
            transition: background-color 0.2s;
        }
        
        .bus-name {
            font-weight: 600;
            background-color: #e9ecef;
            color: #495057;
        }
        
        .demandas-row {
            background-color: #f8f9fa;
        }
        
        .demandas-label {
            font-weight: 600;
            text-transform: uppercase;
            font-size: 14px;
            color: #495057;
        }
        
        .total-cell {
            font-weight: 600;
            font-size: 16px;
            color: #495057;
            position: relative;
        }
        
        .table-title {
            text-align: center;
            color: #343a40;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 22px;
        }
        
        .cell-x {
            color: #dc3545;
            font-weight: 600;
        }
        
        .zero-value {
            color: #6c757d;
        }
        
        .optimal-route {
            background-color: rgba(76, 175, 80, 0.15);
        }
    </style>
</head>
<body>
    <div id="tabla-container" class="table-container">
        <h2 class="table-title">Tabla de Distribución de Buses</h2>
    </div>

    <script>
        // Datos en formato de array de objetos
        const datos = {
            buses: [
                {
                    nombre: "Bus1",
                    ciudades: [
                        { topValue: 35, bottomValue: 8, isOptimal: true },
                        { topValue: "X", bottomValue: 15, isOptimal: false },
                        { topValue: "X", bottomValue: 10, isOptimal: false },
                        { topValue: 0, bottomValue: 0, isOptimal: false }
                    ],
                    oferta: 35
                },
                {
                    nombre: "Bus2",
                    ciudades: [
                        { topValue: 10, bottomValue: 10, isOptimal: false },
                        { topValue: 20, bottomValue: 12, isOptimal: true },
                        { topValue: 20, bottomValue: 14, isOptimal: true },
                        { topValue: 0, bottomValue: 0, isOptimal: false }
                    ],
                    oferta: 50
                },
                {
                    nombre: "Bus3",
                    ciudades: [
                        { topValue: "X", bottomValue: 14, isOptimal: false },
                        { topValue: "X", bottomValue: 9, isOptimal: false },
                        { topValue: 10, bottomValue: 15, isOptimal: true },
                        { topValue: 30, bottomValue: 0, isOptimal: true }
                    ],
                    oferta: 40
                }
            ],
            demandas: [45, 20, 30, 30],
            total: 125
        };

        function crearTabla() {
            const container = document.getElementById('tabla-container');
            const table = document.createElement('table');
            
            // Crear encabezado
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            
            const emptyHeader = document.createElement('th');
            headerRow.appendChild(emptyHeader);
            
            for (let i = 1; i <= 4; i++) {
                const th = document.createElement('th');
                th.textContent = `Ciudad${i}`;
                headerRow.appendChild(th);
            }
            
            const ofertaHeader = document.createElement('th');
            ofertaHeader.textContent = 'Oferta';
            headerRow.appendChild(ofertaHeader);
            
            thead.appendChild(headerRow);
            table.appendChild(thead);
            
            // Crear cuerpo de la tabla
            const tbody = document.createElement('tbody');
            
            // Filas de buses
            datos.buses.forEach(bus => {
                const row = document.createElement('tr');
                
                // Celda con nombre del bus
                const busNameCell = document.createElement('td');
                busNameCell.className = 'bus-name';
                busNameCell.textContent = bus.nombre;
                row.appendChild(busNameCell);
                
                // Celdas de ciudades
                bus.ciudades.forEach((ciudad, index) => {
                    const td = document.createElement('td');
                    
                    // Celda con diagonal
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    
                    // Aplicar clase para ruta óptima si corresponde
                    if (ciudad.isOptimal) {
                        td.classList.add('optimal-route');
                    }
                    
                    const diagonal = document.createElement('div');
                    diagonal.className = 'diagonal-line';
                    cell.appendChild(diagonal);
                    
                    const topDiv = document.createElement('div');
                    topDiv.className = 'top-value';
                    topDiv.textContent = ciudad.bottomValue;
                    if (ciudad.bottomValue === 0) {
                        topDiv.classList.add('zero-value');
                    }
                    cell.appendChild(topDiv);
                    
                    const bottomDiv = document.createElement('div');
                    bottomDiv.className = 'bottom-value';
                    bottomDiv.textContent = ciudad.topValue;
                    if (ciudad.topValue === "X") {
                        bottomDiv.classList.add('cell-x');
                    }
                    if (ciudad.topValue === 0) {
                        bottomDiv.classList.add('zero-value');
                    }
                    cell.appendChild(bottomDiv);
                    
                    td.appendChild(cell);
                    row.appendChild(td);
                });
                
                // Celda de oferta
                const ofertaCell = document.createElement('td');
                ofertaCell.className = 'highlighted';
                ofertaCell.textContent = bus.oferta;
                row.appendChild(ofertaCell);
                
                tbody.appendChild(row);
            });
            
            // Fila de demandas
            const demandasRow = document.createElement('tr');
            demandasRow.className = 'demandas-row';
            
            const demandasLabel = document.createElement('td');
            demandasLabel.className = 'demandas-label';
            demandasLabel.textContent = 'Demandas';
            demandasRow.appendChild(demandasLabel);
            
            datos.demandas.forEach(demanda => {
                const td = document.createElement('td');
                td.className = 'highlighted';
                td.textContent = demanda;
                demandasRow.appendChild(td);
            });
            
            // Celda del total con diagonal
            const totalCell = document.createElement('td');
            totalCell.className = 'total-cell';
            
            // Crear celda con diagonal para el total
            const totalCellDiv = document.createElement('div');
            totalCellDiv.className = 'cell';
            
            const totalDiagonal = document.createElement('div');
            totalDiagonal.className = 'diagonal-line';
            totalCellDiv.appendChild(totalDiagonal);
            
            // Suma total de demandas arriba
            const topTotalDiv = document.createElement('div');
            topTotalDiv.className = 'top-value';
            topTotalDiv.style.fontWeight = '600';
            topTotalDiv.textContent = datos.total;
            totalCellDiv.appendChild(topTotalDiv);
            
            // Suma total de ofertas abajo
            const bottomTotalDiv = document.createElement('div');
            bottomTotalDiv.className = 'bottom-value';
            bottomTotalDiv.style.fontWeight = '600';
            bottomTotalDiv.textContent = datos.total;
            totalCellDiv.appendChild(bottomTotalDiv);
            
            totalCell.appendChild(totalCellDiv);
            demandasRow.appendChild(totalCell);
            
            tbody.appendChild(demandasRow);
            table.appendChild(tbody);
            
            container.appendChild(table);
        }
        
        // Inicializar la tabla al cargar la página
        window.onload = crearTabla;
    </script>
</body>
</html>